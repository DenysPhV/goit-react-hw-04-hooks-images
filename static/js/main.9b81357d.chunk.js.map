{"version":3,"sources":["components/Modal/Modal.module.scss","components/App.module.scss","components/ImageGallery/ImageGalleryItem.module.scss","components/ImageGallery/ImageGallery.module.scss","components/Button/Button.module.scss","components/Searchbar/Searchbar.module.scss","components/services/getImagesApi.js","components/Searchbar/SearchBar.js","components/ImageGallery/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Modal/Modal.js","components/App.js","index.js"],"names":["module","exports","fetchData","a","searchQuery","currentPage","perPage","axios","get","response","data","hits","getImagesApi","Searchbar","onSubmit","useState","query","setQuery","className","s","e","preventDefault","trim","toast","error","SearchForm","type","SearchForm__button","SearchForm__button__label","autoComplete","autoFocus","placeholder","value","onChange","target","SearchForm__input","ImageGalleryItem","id","webformatURL","largeImageURL","tags","src","alt","ImageGalleryItem__image","ImageGallery","images","onClick","map","Button","onLoadMore","modalRoot","document","querySelector","Modal","handleKeydown","code","props","onClose","handleBackdropClick","currentTarget","window","addEventListener","this","removeEventListener","createPortal","Overlay","children","Component","App","setImages","setCurrentPage","setPerPage","showModal","setShowModal","setSearchQuery","isLoading","setIsLoading","largeUrl","setLargeUrl","useEffect","fetchImages","options","prevState","console","log","length","scrollTo","top","documentElement","scrollHeight","behavior","toggleModal","renderLoadMoreButton","nodeName","dataset","url","color","height","width","radius","prevPage","theme","transition","Flip","draggableDirection","onLoad","ReactDom","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9b81357d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__31qJY\",\"Modal\":\"Modal_Modal__EHi_o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__3hXuV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem__image\":\"ImageGalleryItem_ImageGalleryItem__image__3Ftxz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1sIgR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__5aB9T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__vgYCz\",\"SearchForm\":\"Searchbar_SearchForm__1FoZt\",\"SearchForm__button\":\"Searchbar_SearchForm__button__3ktsy\",\"SearchForm__button__label\":\"Searchbar_SearchForm__button__label__1eCCv\",\"SearchForm__input\":\"Searchbar_SearchForm__input__16NVl\"};","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst MY_KEY = '22979201-d3b88ee555cfd640fb3d2f529';\n\nconst fetchData = async ({\n  searchQuery = '',\n  currentPage = 1,\n  perPage = 12,\n}) => {\n  const response = await axios.get(\n    `${BASE_URL}?q=${searchQuery}&page=${currentPage}&key=${MY_KEY}&image_type=photo&orientation=horizontal&per_page=${perPage}`,\n  );\n  return response.data.hits;\n};\n\nconst getImagesApi = { fetchData };\nexport default getImagesApi;\n","// import { Component } from 'react';\nimport { useState } from 'react';\nimport { toast } from 'react-toastify';\n\nimport PropTypes from 'prop-types';\nimport s from './Searchbar.module.scss';\n\nexport default function Searchbar({ onSubmit }) {\n  const [query, setQuery] = useState('');\n\n  const handleChange = (e) => {\n    setQuery(e.target.value);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    onSubmit(query);\n\n    setQuery('');\n\n    if (query.trim() === '') {\n      // alert('Ты ничего не ввел');\n      toast.error('Please enter at least one letter !');\n      return;\n    }\n  };\n\n  return (\n    <header className={s.Searchbar}>\n      <form onSubmit={handleSubmit} className={s.SearchForm}>\n        <button type=\"submit\" className={s.SearchForm__button}>\n          <span className={s.SearchForm__button__label}>Search</span>\n        </button>\n\n        <input\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          value={query}\n          onChange={handleChange}\n          className={s.SearchForm__input}\n        />\n      </form>\n    </header>\n  );\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n\n// export default class Searchbar extends Component {\n//   state = {\n//     query: '',\n//   };\n\n//   handleChange = (e) => {\n//     this.setState({ query: e.target.value });\n//   };\n\n//   handleSubmit = (e) => {\n//     e.preventDefault();\n\n//     this.props.onSubmit(this.state.query);\n//     this.setState({ query: '' });\n\n//     if (this.state.query.trim() === '') {\n//       // alert('Ты ничего не ввел');\n//       toast.error('Please enter at least one letter !');\n//       return;\n//     }\n//   };\n\n//   render() {\n//     const { query } = this.state;\n//     return (\n//       <header className={s.Searchbar}>\n//         <form onSubmit={this.handleSubmit} className={s.SearchForm}>\n//           <button type=\"submit\" className={s.SearchForm__button}>\n//             <span className={s.SearchForm__button__label}>Search</span>\n//           </button>\n\n//           <input\n//             type=\"text\"\n//             autoComplete=\"off\"\n//             autoFocus\n//             placeholder=\"Search images and photos\"\n//             value={query}\n//             onChange={this.handleChange}\n//             className={s.SearchForm__input}\n//           />\n//         </form>\n//       </header>\n//     );\n//   }\n// }\n\n// Searchbar.propTypes = {\n//   onSubmit: PropTypes.func.isRequired,\n// };\n","import PropTypes from 'prop-types';\nimport s from './ImageGalleryItem.module.scss';\n\nconst ImageGalleryItem = ({ id, webformatURL, largeImageURL, tags }) => (\n  <li key={id}>\n    <img\n      src={webformatURL}\n      alt={tags}\n      data-url={largeImageURL}\n      className={s.ImageGalleryItem__image}\n    />\n  </li>\n);\n\nImageGalleryItem.propTypes = {\n  id: PropTypes.number,\n  webformatURL: PropTypes.string,\n  largeImageURL: PropTypes.string.isRequired,\n  tags: PropTypes.string.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import PropTypes from 'prop-types';\n\nimport ImageGalleryItem from './ImageGalleryItem';\nimport s from './ImageGallery.module.scss';\n\nconst ImageGallery = ({ images, onClick }) => (\n  <ul className={s.ImageGallery} onClick={onClick}>\n    {images.map(({ id, webformatURL, largeImageURL, tags }) => (\n      <ImageGalleryItem\n        key={id}\n        webformatURL={webformatURL}\n        largeImageURL={largeImageURL}\n        tags={tags}\n      />\n    ))}\n  </ul>\n);\n\nImageGallery.propTypes = {\n  images: PropTypes.arrayOf(PropTypes.shape).isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGallery;\n","import PropTypes from 'prop-types';\nimport s from './Button.module.scss';\n\nconst Button = ({ onLoadMore }) => (\n  <button onClick={onLoadMore} type=\"button\" className={s.Button}>\n    Load more\n  </button>\n);\n\nButton.propTypes = {\n  onLoadMore: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport PropTypes from 'prop-types';\nimport s from './Modal.module.scss';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeydown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeydown);\n  }\n\n  handleKeydown = (e) => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = (e) => {\n    if (e.target === e.currentTarget) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nModal.propTypes = {\n  children: PropTypes.node.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n","import { useState, useEffect } from 'react';\nimport Loader from 'react-loader-spinner';\nimport { ToastContainer, Flip } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport s from './App.module.scss';\n\nimport getImagesApi from './services/getImagesApi';\n\nimport Searchbar from './Searchbar';\nimport ImageGallery from './ImageGallery';\nimport Button from './Button';\nimport Modal from './Modal';\n\nexport default function App() {\n  const [images, setImages] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [perPage, setPerPage] = useState(0);\n  const [showModal, setShowModal] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [largeUrl, setLargeUrl] = useState('');\n\n  const onChangeQuery = (query) => {\n    setImages([]);\n    setCurrentPage(1);\n    setSearchQuery(query);\n  };\n\n  useEffect(() => {\n    setPerPage(12);\n    if (!searchQuery) {\n      return;\n    }\n\n    const fetchImages = async () => {\n      const options = { searchQuery, currentPage, perPage };\n\n      setIsLoading(true);\n\n      try {\n        const response = await getImagesApi.fetchData(options);\n        setImages((prevState) => [...prevState, ...response]);\n        setIsLoading(false);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    fetchImages();\n  }, [searchQuery, currentPage, perPage]);\n\n  useEffect(() => {\n    setPerPage(12);\n\n    if (images.length > perPage) {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    }\n  }, [images, perPage]);\n\n  const nextPage = () => setCurrentPage((prevPage) => prevPage + 1);\n\n  const toggleModal = () => {\n    setShowModal(!showModal);\n  };\n\n  const onImageClick = (e) => {\n    if (e.target.nodeName !== 'IMG') {\n      return;\n    }\n    setIsLoading(true);\n    setLargeUrl(e.target.dataset.url);\n\n    toggleModal();\n  };\n\n  const toggleLoader = () => {\n    setIsLoading(false);\n  };\n\n  const renderLoadMoreButton = images.length > 0 && !isLoading;\n\n  return (\n    <div className={s.App}>\n      <Searchbar onSubmit={onChangeQuery} />\n\n      <ImageGallery images={images} onClick={onImageClick} />\n      {isLoading && (\n        <Loader\n          type=\"Puff\"\n          color=\"#00BFFF\"\n          height={80}\n          width={80}\n          radius={50}\n        />\n      )}\n      {renderLoadMoreButton && <Button onLoadMore={nextPage} />}\n      <ToastContainer theme=\"dark\" transition={Flip} draggableDirection=\"y\" />\n\n      {showModal && (\n        <Modal onClose={toggleModal}>\n          <img src={largeUrl} alt=\"\" onLoad={toggleLoader} />\n        </Modal>\n      )}\n    </div>\n  );\n}\n","import ReactDom from 'react-dom';\nimport './index.scss';\nimport App from './components/App';\nimport React from 'react';\n\nReactDom.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}